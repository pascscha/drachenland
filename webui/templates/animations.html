{% extends "base.html" %}
{% block title %}Animations{% endblock %}
{% block page_title %}Manage Animations{% endblock %}
{% include 'partials/header.html' %}
{% block content %}
<style>
    .animations-container {
        max-width: 800px;
        margin: auto;
        padding: 20px;
    }

    .upload-section {
        background-color: var(--card-background);
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
    }

    .animation-list {
        list-style: none;
        padding: 0;
    }

    .animation-item {
        background-color: var(--card-background);
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .delete-btn,
    .download-btn {
        background-color: #c13a3a;
        /* Default for delete button */
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
        margin-left: 10px;
        /* Space between buttons */
    }

    .download-btn {
        background-color: var(--accent-color);
        /* Green for download */
    }

    .delete-btn:hover {
        background-color: #a53030;
    }

    .download-btn:hover {
        background-color: var(--hover-color);
    }

    .upload-btn {
        background-color: var(--accent-color);
        color: white;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .upload-btn:hover {
        background-color: var(--hover-color);
    }

    input[type="file"] {
        color: var(--text-color);
    }

    .animation-actions {
        display: flex;
        gap: 5px;
        /* Adjust gap between buttons */
    }
</style>
<div class="animations-container">
    <div class="upload-section">
        <h2>Upload New Animation</h2>
        <form action="{{ url_for('manage_animations') }}" method="post" enctype="multipart/form-data">
            <div style="margin-bottom: 10px;">
                <label>Category:</label>
                <select name="category" style="padding: 5px; border-radius: 4px; border: 1px solid #ccc;">
                    <option value="open">Open (Opening Hours)</option>
                    <option value="closed">Closed (Outside Opening Hours)</option>
                </select>
            </div>
            <input type="file" name="file" accept=".json" required>
            <button type="submit" class="upload-btn">Upload</button>
        </form>
    </div>

    <h2>Open Animations (During Opening Hours)</h2>
    <ul class="animation-list">
        {% for animation in animations_open %}
        <li class="animation-item">
            <span>{{ animation }}</span>
            <div class="animation-actions">
                <a href="{{ url_for('download_animation', category='open', filename=animation) }}" class="download-btn"
                    download><i class="fas fa-download"></i></a>
                <form action="{{ url_for('delete_animation', category='open', filename=animation) }}" method="post"
                    onsubmit="return confirm('Delete this animation?');">
                    <button type="submit" class="delete-btn"><i class="fas fa-trash"></i></button>
                </form>
            </div>
        </li>
        {% else %}
        <li>No open animations found.</li>
        {% endfor %}
    </ul>

    <h2>Closed Animations (Outside Opening Hours)</h2>
    <ul class="animation-list">
        {% for animation in animations_closed %}
        <li class="animation-item">
            <span>{{ animation }}</span>
            <div class="animation-actions">
                <a href="{{ url_for('download_animation', category='closed', filename=animation) }}"
                    class="download-btn" download><i class="fas fa-download"></i></a>
                <form action="{{ url_for('delete_animation', category='closed', filename=animation) }}" method="post"
                    onsubmit="return confirm('Delete this animation?');">
                    <button type="submit" class="delete-btn"><i class="fas fa-trash"></i></button>
                </form>
            </div>
        </li>
        {% else %}
        <li>No closed animations found.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}